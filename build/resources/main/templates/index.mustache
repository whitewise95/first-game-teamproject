<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
{{>layout/header}}


  <h1>스프링부트로 시작하는 웹서비스</h1>
  <div class="col-md-12">
    <div class="row">
        <div class="col-md-6">
          <a href="/posts/save" role="button" class="btn btn-primary">글쓰기</a>
          {{#userName}}
            Logged in as: <span id="user">{{userName}}</span>
          <a href="/logout" class="btn btn-info active" role="button">Login</a>
          {{/userName}}
          {{^userName}}
            <a href="/oauth2/authorization/google" class="btn btn-success active">google Longin</a>
          {{/userName}}
        </div>

    </div>
    <br>
    <table class="table table-horizontal table-bordered">
      <thead class="thead-strong">
        <tr>
          <th>게시판번호</th>
          <th>제목</th>
          <th>작성자</th>
          <th>수정일</th>
        </tr>
      </thead>
      <tbody id="tbody">
        {{#posts}}
        <tr>
            <td>{{id}}</td>
            <td><a href="/posts/update/{{id}}">{{title}}</a></td>
            <td>{{author}}</td>
            <td>{{modifiedDate}}</td>
        </tr>
        {{/posts}}
      </tbody>
    </table>
<!--    <form id="upload-file-form">-->
<!--      <input type="text" name="extra">-->
<!--      <label for="upload-file-input">Upload your file:</label>-->
<!--      <input id="upload-file-input" type="file" id="uploadfile" name="uploadfile" accept="*" />-->
<!--      <button type="button" onclick="uploadFile();">업로드</button>-->
<!--    </form>-->

    <form id="form1" name="form1" method="post" enctype="multipart/form-data" onsubmit="return false">
      <input type="file" id="fileInput" name="fileInput">
      <a href="javascript:void(0);" onclick="excelUploadProcess()">엑셀업로드</a>
    </form>

  </div>
{{>layout/footer}}
</body>
<script>
  function uploadFile() {
      debugger;
      $.ajax({
        url: "/member/fileUpload",
        type: "POST",
        data: new FormData($("#upload-file-form")[0]),
        enctype: 'multipart/form-data',
        processData: false,
        contentType: false,
        cache: false,
        success: function () {
            console.log("sss");
          // Handle upload success
          // ...
        },
        error: function () {
          // Handle upload error
          // ...
        }
      })
  };


  function excelUploadProcess(){
    var f = new FormData(document.getElementById('form1'));
    $.ajax({
      url: "/member/fileUpload",
      data: f,
      processData: false,
      contentType: false,
      type: "POST",
      success: function(data){
        console.log(data);
        document.getElementById('result').innerHTML = JSON.stringify(data);
      }
    });
  }

</script>
</html>